<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTC市場方向性スコア ダッシュボード</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #0a0e1a;
            color: #ffffff;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ヘッダー */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #1a2332;
            margin-bottom: 30px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(45deg, #00d4ff, #0099ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .position-status {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .position-badge {
            padding: 8px 16px;
            background: #2a3a4a;
            border-radius: 20px;
            font-size: 14px;
        }

        .position-badge.long {
            background: #00ff00;
            color: #0a0e1a;
        }

        .position-badge.short {
            background: #ff3b3b;
            color: #ffffff;
        }

        .add-position-btn {
            padding: 8px 20px;
            background: #00d4ff;
            color: #0a0e1a;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .add-position-btn:hover {
            background: #0099ff;
            transform: translateY(-1px);
        }

        /* ポジション未保有時のメインスコア */
        .no-position-view {
            display: block;
        }

        .entry-score-section {
            background: linear-gradient(135deg, #1a2332 0%, #0f1722 100%);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .score-display-area {
            text-align: center;
            min-width: 200px;
        }

        .entry-score-title {
            font-size: 16px;
            color: #7a8a9a;
            margin-bottom: 10px;
        }

        .entry-score-display {
            font-size: 48px;
            font-weight: bold;
            line-height: 1;
            margin-bottom: 10px;
        }

        .entry-recommendation {
            display: inline-block;
            padding: 8px 20px;
            background: #0f1722;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
        }

        .entry-recommendation.buy-strong {
            border: 2px solid #00ff00;
            color: #00ff00;
        }

        .entry-recommendation.buy-weak {
            border: 2px solid #90ee90;
            color: #90ee90;
        }

        .entry-recommendation.neutral {
            border: 2px solid #ffdd00;
            color: #ffdd00;
        }

        .entry-recommendation.sell-weak {
            border: 2px solid #ff6b6b;
            color: #ff6b6b;
        }

        .entry-recommendation.sell-strong {
            border: 2px solid #ff3b3b;
            color: #ff3b3b;
        }

        .entry-conditions {
            flex: 1;
            text-align: left;
        }

        .condition-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #0f1722;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .condition-icon {
            font-size: 24px;
        }

        .condition-good {
            color: #00ff00;
        }

        .condition-bad {
            color: #ff3b3b;
        }

        .condition-neutral {
            color: #ffdd00;
        }

        /* ポジション保有時のビュー */
        .position-view {
            display: none;
        }

        .position-summary {
            background: linear-gradient(135deg, #1a2332 0%, #0f1722 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .position-info {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            margin-bottom: 30px;
        }

        .position-info-item {
            text-align: center;
        }

        .info-label {
            color: #7a8a9a;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 28px;
            font-weight: bold;
        }

        .profit {
            color: #00ff00;
        }

        .loss {
            color: #ff3b3b;
        }

        /* アクション推奨セクション */
        .action-section {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .action-card {
            background: #1a2332;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }

        .action-priority {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .priority-high {
            background: #ff3b3b;
        }

        .priority-medium {
            background: #ffdd00;
            color: #0a0e1a;
        }

        .priority-low {
            background: #2a3a4a;
        }

        .action-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #00d4ff;
        }

        .action-description {
            color: #c9d1d9;
            font-size: 14px;
            line-height: 1.6;
        }

        /* リスクモニター */
        .risk-monitor {
            background: #1a2332;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .risk-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .risk-item {
            background: #0f1722;
            padding: 20px;
            border-radius: 10px;
        }

        .risk-name {
            color: #7a8a9a;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .risk-bar {
            height: 10px;
            background: #2a3a4a;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .risk-fill {
            height: 100%;
            transition: width 0.3s;
        }

        .risk-low {
            background: #00ff00;
        }

        .risk-medium {
            background: #ffdd00;
        }

        .risk-high {
            background: #ff3b3b;
        }

        .risk-value {
            text-align: right;
            font-weight: bold;
            font-size: 14px;
        }

        /* ポジション管理スコア */
        .management-scores {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .management-card {
            background: #1a2332;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .management-score {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .management-label {
            color: #7a8a9a;
            font-size: 14px;
        }

        /* モーダル */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #1a2332;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: bold;
            color: #00d4ff;
        }

        .close-btn {
            background: none;
            border: none;
            color: #7a8a9a;
            font-size: 24px;
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: #7a8a9a;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 12px;
            background: #0f1722;
            border: 1px solid #2a3a4a;
            border-radius: 8px;
            color: #ffffff;
            font-size: 16px;
        }

        .position-type-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .type-btn {
            padding: 15px;
            background: #0f1722;
            border: 2px solid #2a3a4a;
            border-radius: 10px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            font-weight: bold;
        }

        .type-btn.active {
            border-color: #00d4ff;
            background: #00d4ff20;
        }

        .type-btn.long.active {
            border-color: #00ff00;
            background: #00ff0020;
        }

        .type-btn.short.active {
            border-color: #ff3b3b;
            background: #ff3b3b20;
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            background: #00d4ff;
            color: #0a0e1a;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            background: #0099ff;
        }

        /* 利確・損切りボタン */
        .exit-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .exit-btn {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .profit-btn {
            background: #00ff00;
            color: #0a0e1a;
        }

        .profit-btn:hover {
            background: #00cc00;
            transform: translateY(-2px);
        }

        .loss-btn {
            background: #ff3b3b;
            color: #ffffff;
        }

        .loss-btn:hover {
            background: #cc0000;
            transform: translateY(-2px);
        }

        .partial-btn {
            background: #ffdd00;
            color: #0a0e1a;
        }

        .partial-btn:hover {
            background: #ccaa00;
            transform: translateY(-2px);
        }

        /* 共通部分（チャート等） */
        .chart-section {
            background: #1a2332;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
        }

        /* レスポンシブ */
        @media (max-width: 1024px) {
            .position-info {
                grid-template-columns: repeat(2, 1fr);
            }

            .action-section {
                grid-template-columns: 1fr;
            }

            .management-scores {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .entry-score-section {
                flex-direction: column;
                text-align: center;
            }

            .entry-score-display {
                font-size: 36px;
            }

            .position-info {
                grid-template-columns: 1fr;
            }

            .risk-grid {
                grid-template-columns: 1fr;
            }

            .management-scores {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">BTC Direction Score</div>
            <div class="position-status">
                <div class="position-badge" id="positionBadge">ポジションなし</div>
                <button class="add-position-btn" onclick="openModal()">ポジション追加</button>
            </div>
        </header>

        <!-- ポジション未保有時のビュー -->
        <div class="no-position-view" id="noPositionView">
            <div class="entry-score-section">
                <div class="score-display-area">
                    <h2 class="entry-score-title">エントリー判断スコア</h2>
                    <div class="entry-score-display score-positive">+44</div>
                    <div class="entry-recommendation buy-weak">買いエントリー推奨</div>
                </div>
                
                <div class="entry-conditions">
                    <div class="condition-item">
                        <span class="condition-icon condition-good">✓</span>
                        <div>
                            <strong>トレンド方向</strong><br>
                            <span style="color: #7a8a9a; font-size: 14px;">日足・4時間足・1時間足すべて上昇トレンド</span>
                        </div>
                    </div>
                    <div class="condition-item">
                        <span class="condition-icon condition-good">✓</span>
                        <div>
                            <strong>需給環境</strong><br>
                            <span style="color: #7a8a9a; font-size: 14px;">ETF流入継続、取引所残高減少中</span>
                        </div>
                    </div>
                    <div class="condition-item">
                        <span class="condition-icon condition-neutral">!</span>
                        <div>
                            <strong>エントリー位置</strong><br>
                            <span style="color: #7a8a9a; font-size: 14px;">$42,000のサポート付近が理想的</span>
                        </div>
                    </div>
                    <div class="condition-item">
                        <span class="condition-icon condition-bad">×</span>
                        <div>
                            <strong>リスク要因</strong><br>
                            <span style="color: #7a8a9a; font-size: 14px;">ロングポジション偏り（調整リスクあり）</span>
                        </div>
                    </div>
                </div>
            </div>


            <!-- 時間足別スコア -->
            <h3 style="color: #00d4ff; margin-bottom: 20px;">時間足別エントリータイミング</h3>
            <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin-bottom: 30px;">
                <div style="background: #1a2332; padding: 20px; border-radius: 15px; text-align: center;">
                    <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 10px;">日足</div>
                    <div style="font-size: 32px; font-weight: bold; color: #00ff00; margin-bottom: 10px;">+62</div>
                    <div style="font-size: 14px; color: #00ff00;">買い推奨</div>
                </div>
                <div style="background: #1a2332; padding: 20px; border-radius: 15px; text-align: center;">
                    <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 10px;">4時間足</div>
                    <div style="font-size: 32px; font-weight: bold; color: #00ff00; margin-bottom: 10px;">+48</div>
                    <div style="font-size: 14px; color: #00ff00;">買い推奨</div>
                </div>
                <div style="background: #1a2332; padding: 20px; border-radius: 15px; text-align: center;">
                    <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 10px;">1時間足</div>
                    <div style="font-size: 32px; font-weight: bold; color: #90ee90; margin-bottom: 10px;">+35</div>
                    <div style="font-size: 14px; color: #90ee90;">買い可能</div>
                </div>
                <div style="background: #1a2332; padding: 20px; border-radius: 15px; text-align: center;">
                    <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 10px;">15分足</div>
                    <div style="font-size: 32px; font-weight: bold; color: #ffdd00; margin-bottom: 10px;">+12</div>
                    <div style="font-size: 14px; color: #ffdd00;">様子見</div>
                </div>
                <div style="background: #1a2332; padding: 20px; border-radius: 15px; text-align: center;">
                    <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 10px;">5分足</div>
                    <div style="font-size: 32px; font-weight: bold; color: #ff6b6b; margin-bottom: 10px;">-8</div>
                    <div style="font-size: 14px; color: #ff6b6b;">待機推奨</div>
                </div>
            </div>

            <!-- TradingViewチャート -->
            <div class="chart-section">
                <h3 style="color: #00d4ff; margin-bottom: 20px;">BTC/USD チャート</h3>
                <!-- TradingView Widget BEGIN -->
                <div class="tradingview-widget-container">
                    <div id="tradingview_btc_entry"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                    <script type="text/javascript">
                    new TradingView.widget(
                    {
                        "width": "100%",
                        "height": 500,
                        "symbol": "BITSTAMP:BTCUSD",
                        "interval": "60",
                        "timezone": "Asia/Tokyo",
                        "theme": "dark",
                        "style": "1",
                        "locale": "ja",
                        "enable_publishing": false,
                        "allow_symbol_change": true,
                        "container_id": "tradingview_btc_entry",
                        "studies": [
                            "MASimple@tv-basicstudies",
                            "RSI@tv-basicstudies"
                        ],
                        "toolbar_bg": "#1a2332"
                    }
                    );
                    </script>
                </div>
                <!-- TradingView Widget END -->
            </div>

            <!-- AI総合解説 -->
            <div style="background: #1a2332; border-left: 4px solid #00d4ff; border-radius: 15px; padding: 25px; margin-bottom: 30px;">
                <h3 style="color: #00d4ff; margin-bottom: 15px;">AI総合解説</h3>
                <p style="color: #c9d1d9; font-size: 16px; line-height: 1.8;">
                    株式市場が3日連続で上昇し、米10年債利回りが低下中です。ETFへの資金流入も継続的に観測されており、市場全体がリスクオンに傾いています。ビットコインに資金が流入しやすい地合いとなっており、短期的な押し目は買いのチャンスとなる可能性が高いです。ただし、$45,000付近に強いレジスタンスが存在するため、その水準では一旦利益確定を検討することを推奨します。
                </p>
                <div style="margin-top: 20px; padding: 15px; background: #0f1722; border-radius: 10px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="color: #7a8a9a; font-size: 14px;">総合判断</span>
                        <span style="color: #00ff00; font-weight: bold; font-size: 18px;">買い優勢</span>
                    </div>
                    <div style="margin-top: 10px; font-size: 14px; color: #7a8a9a;">
                        リスクオン環境下での上昇トレンド継続を想定
                    </div>
                </div>
            </div>
        </div>

        <!-- ポジション保有時のビュー -->
        <div class="position-view" id="positionView">
            <div class="position-summary">
                <div class="position-info">
                    <div class="position-info-item">
                        <div class="info-label">ポジション</div>
                        <div class="info-value" id="positionType">買い</div>
                    </div>
                    <div class="position-info-item">
                        <div class="info-label">エントリー価格</div>
                        <div class="info-value" id="entryPrice">$42,000</div>
                    </div>
                    <div class="position-info-item">
                        <div class="info-label">現在価格</div>
                        <div class="info-value" id="currentPrice">$42,850</div>
                    </div>
                    <div class="position-info-item">
                        <div class="info-label">損益</div>
                        <div class="info-value profit" id="profitLoss">+$850 (+2.0%)</div>
                    </div>
                </div>
            </div>

            <!-- アクション推奨 -->
            <h3 style="color: #00d4ff; margin-bottom: 20px;">推奨アクション</h3>
            <div class="action-section">
                <div class="action-card">
                    <span class="action-priority priority-low">優先度：低</span>
                    <h4 class="action-title">ポジション維持</h4>
                    <p class="action-description">
                        トレンド継続中。$45,000のレジスタンスまで余裕あり。
                        現状維持が最適です。
                    </p>
                </div>
                <div class="action-card">
                    <span class="action-priority priority-medium">優先度：中</span>
                    <h4 class="action-title">部分利確準備</h4>
                    <p class="action-description">
                        $44,500付近で25%の部分利確を検討。
                        利益を確保しつつトレンドに乗る戦略。
                    </p>
                </div>
                <div class="action-card">
                    <span class="action-priority priority-low">優先度：低</span>
                    <h4 class="action-title">ストップ調整</h4>
                    <p class="action-description">
                        ストップロスを$41,800に引き上げ。
                        最低限の利益を確保。
                    </p>
                </div>
            </div>

            <!-- リスクモニター -->
            <div class="risk-monitor">
                <h3 style="color: #00d4ff; margin-bottom: 0;">リスクモニター</h3>
                <div class="risk-grid">
                    <div class="risk-item">
                        <div class="risk-name">急落リスク</div>
                        <div class="risk-bar">
                            <div class="risk-fill risk-low" style="width: 30%;"></div>
                        </div>
                        <div class="risk-value" style="color: #00ff00;">30%</div>
                    </div>
                    <div class="risk-item">
                        <div class="risk-name">利確タイミング</div>
                        <div class="risk-bar">
                            <div class="risk-fill risk-medium" style="width: 60%;"></div>
                        </div>
                        <div class="risk-value" style="color: #ffdd00;">60%</div>
                    </div>
                    <div class="risk-item">
                        <div class="risk-name">トレンド転換</div>
                        <div class="risk-bar">
                            <div class="risk-fill risk-low" style="width: 20%;"></div>
                        </div>
                        <div class="risk-value" style="color: #00ff00;">20%</div>
                    </div>
                    <div class="risk-item">
                        <div class="risk-name">ポジション疲労度</div>
                        <div class="risk-bar">
                            <div class="risk-fill risk-low" style="width: 40%;"></div>
                        </div>
                        <div class="risk-value" style="color: #00ff00;">40%</div>
                    </div>
                </div>
            </div>

            <!-- ポジション管理スコア -->
            <h3 style="color: #00d4ff; margin-bottom: 20px;">ポジション管理スコア</h3>
            <div class="management-scores">
                <div class="management-card">
                    <div class="management-score score-positive">85</div>
                    <div class="management-label">継続推奨度</div>
                </div>
                <div class="management-card">
                    <div class="management-score" style="color: #ffdd00;">45</div>
                    <div class="management-label">利確推奨度</div>
                </div>
                <div class="management-card">
                    <div class="management-score score-negative">15</div>
                    <div class="management-label">撤退推奨度</div>
                </div>
                <div class="management-card">
                    <div class="management-score score-positive">72</div>
                    <div class="management-label">追加推奨度</div>
                </div>
            </div>

            <!-- 利確プラン -->
            <div style="background: #1a2332; border-radius: 15px; padding: 25px; margin-bottom: 30px;">
                <h3 style="color: #00d4ff; margin-bottom: 20px;">段階的利確プラン</h3>
                <div style="display: grid; gap: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #0f1722; border-radius: 10px;">
                        <span>第1目標：$44,500（+6.1%）</span>
                        <span style="color: #7a8a9a;">25%利確</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #0f1722; border-radius: 10px;">
                        <span>第2目標：$45,000（+7.1%）</span>
                        <span style="color: #7a8a9a;">追加25%利確</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #0f1722; border-radius: 10px;">
                        <span>第3目標：$46,000（+9.5%）</span>
                        <span style="color: #7a8a9a;">追加25%利確</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #0f1722; border-radius: 10px;">
                        <span>残り25%</span>
                        <span style="color: #00d4ff;">トレイリングストップで追従</span>
                    </div>
                </div>
                
                <!-- 利確・損切りボタン -->
                <div class="exit-buttons">
                    <button class="exit-btn partial-btn" onclick="partialExit()">部分利確</button>
                    <button class="exit-btn profit-btn" onclick="fullExit('profit')">全て利確</button>
                    <button class="exit-btn loss-btn" onclick="fullExit('loss')">損切り</button>
                </div>
            </div>
        </div>

        <!-- 共通：モジュール詳細 -->
        <h3 style="color: #00d4ff; margin-bottom: 20px;">スコア構成要素</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
            <div style="background: #1a2332; border-radius: 15px; padding: 20px; transition: all 0.3s;" 
                 onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(0, 0, 0, 0.3)'"
                 onmouseout="this.style.transform='none'; this.style.boxShadow='none'">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <span style="color: #00d4ff;">市場資金循環</span>
                    <span style="font-size: 24px; font-weight: bold; color: #00ff00;">+75</span>
                </div>
                <div style="background: #0f1722; height: 30px; border-radius: 15px; overflow: hidden; margin-bottom: 10px;">
                    <div style="height: 100%; width: 75%; background: linear-gradient(to right, #00d4ff, #00ff00); transition: width 0.5s;"></div>
                </div>
                <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 15px;">株式市場好調、リスクオン環境</div>
                <div style="border-top: 1px solid #2a3a4a; padding-top: 15px;">
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">S&P500（3日変化）</span>
                        <span>+2.1%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">米10年債利回り</span>
                        <span>4.12% ↓</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">ドル指数（DXY）</span>
                        <span>-0.5%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">金（XAU/USD）</span>
                        <span>-1.2%</span>
                    </div>
                </div>
                <div style="margin-top: 15px; padding: 15px; background: #0f1722; border-radius: 10px; font-size: 14px; line-height: 1.6; color: #c9d1d9; border-left: 3px solid #00d4ff;">
                    株式市場の上昇とドル安、さらに金が売られている状況は、典型的なリスクオン相場を示しています。投資家のリスク選好姿勢が強く、株式や暗号資産などのリスク資産に資金が向かいやすい環境です。
                </div>
            </div>

            <div style="background: #1a2332; border-radius: 15px; padding: 20px; transition: all 0.3s;" 
                 onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(0, 0, 0, 0.3)'"
                 onmouseout="this.style.transform='none'; this.style.boxShadow='none'">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <span style="color: #00d4ff;">BTC需給</span>
                    <span style="font-size: 24px; font-weight: bold; color: #00ff00;">+85</span>
                </div>
                <div style="background: #0f1722; height: 30px; border-radius: 15px; overflow: hidden; margin-bottom: 10px;">
                    <div style="height: 100%; width: 85%; background: linear-gradient(to right, #00d4ff, #00ff00); transition: width 0.5s;"></div>
                </div>
                <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 15px;">ETF継続流入、取引所残高減少</div>
                <div style="border-top: 1px solid #2a3a4a; padding-top: 15px;">
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">ETF純流入（日次）</span>
                        <span>+$285M</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">取引所BTC残高</span>
                        <span>-12,000 BTC</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">長期保有者比率</span>
                        <span>67.2% ↑</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">ハッシュレート</span>
                        <span>420 EH/s</span>
                    </div>
                </div>
                <div style="margin-top: 15px; padding: 15px; background: #0f1722; border-radius: 10px; font-size: 14px; line-height: 1.6; color: #c9d1d9; border-left: 3px solid #00d4ff;">
                    ETFへの大規模な資金流入と取引所からのBTC流出が同時に起きており、需給バランスは極めて良好です。長期保有者の増加は売り圧力の低下を意味し、中期的な価格上昇を強く支持します。
                </div>
            </div>

            <div style="background: #1a2332; border-radius: 15px; padding: 20px; transition: all 0.3s;" 
                 onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(0, 0, 0, 0.3)'"
                 onmouseout="this.style.transform='none'; this.style.boxShadow='none'">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <span style="color: #00d4ff;">マクロ環境</span>
                    <span style="font-size: 24px; font-weight: bold; color: #00ff00;">+60</span>
                </div>
                <div style="background: #0f1722; height: 30px; border-radius: 15px; overflow: hidden; margin-bottom: 10px;">
                    <div style="height: 100%; width: 60%; background: linear-gradient(to right, #00d4ff, #00ff00); transition: width 0.5s;"></div>
                </div>
                <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 15px;">金利低下見通し、緩和的</div>
                <div style="border-top: 1px solid #2a3a4a; padding-top: 15px;">
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">政策金利</span>
                        <span>5.25% (横ばい)</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">CPI前年比</span>
                        <span>3.2% ↓</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">次回FOMC予想</span>
                        <span>据え置き 85%</span>
                    </div>
                </div>
                <div style="margin-top: 15px; padding: 15px; background: #0f1722; border-radius: 10px; font-size: 14px; line-height: 1.6; color: #c9d1d9; border-left: 3px solid #00d4ff;">
                    インフレ率の低下により利上げサイクルは終了局面にあり、市場は次の利下げを織り込み始めています。この金融政策の転換期待はリスク資産全般にとって追い風となっています。
                </div>
            </div>

            <div style="background: #1a2332; border-radius: 15px; padding: 20px; transition: all 0.3s;" 
                 onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(0, 0, 0, 0.3)'"
                 onmouseout="this.style.transform='none'; this.style.boxShadow='none'">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <span style="color: #00d4ff;">市場心理</span>
                    <span style="font-size: 24px; font-weight: bold; color: #ffdd00;">+40</span>
                </div>
                <div style="background: #0f1722; height: 30px; border-radius: 15px; overflow: hidden; margin-bottom: 10px;">
                    <div style="height: 100%; width: 40%; background: linear-gradient(to right, #00d4ff, #00ff00); transition: width 0.5s;"></div>
                </div>
                <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 15px;">楽観優勢、過熱感なし</div>
                <div style="border-top: 1px solid #2a3a4a; padding-top: 15px;">
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">Fear & Greed</span>
                        <span>68 (貪欲)</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">SNSセンチメント</span>
                        <span>72% ポジティブ</span>
                    </div>
                </div>
                <div style="margin-top: 15px; padding: 15px; background: #0f1722; border-radius: 10px; font-size: 14px; line-height: 1.6; color: #c9d1d9; border-left: 3px solid #00d4ff;">
                    市場は楽観的ですが極端な過熱感はなく、健全な上昇局面にあります。SNSでのポジティブな議論が継続しており、新規参加者の流入が期待できる状況です。
                </div>
            </div>

            <div style="background: #1a2332; border-radius: 15px; padding: 20px; transition: all 0.3s;" 
                 onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(0, 0, 0, 0.3)'"
                 onmouseout="this.style.transform='none'; this.style.boxShadow='none'">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <span style="color: #00d4ff;">ポジション構造</span>
                    <span style="font-size: 24px; font-weight: bold; color: #ff6b6b;">-20</span>
                </div>
                <div style="background: #0f1722; height: 30px; border-radius: 15px; overflow: hidden; margin-bottom: 10px;">
                    <div style="height: 100%; width: 20%; background: linear-gradient(to right, #ff3b3b, #ff6b6b); transition: width 0.5s;"></div>
                </div>
                <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 15px;">ロング偏り、調整リスクあり</div>
                <div style="border-top: 1px solid #2a3a4a; padding-top: 15px;">
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">ロング/ショート比</span>
                        <span>1.85</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">Funding Rate</span>
                        <span>0.025%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">OI増減</span>
                        <span>+8.5%</span>
                    </div>
                </div>
                <div style="margin-top: 15px; padding: 15px; background: #0f1722; border-radius: 10px; font-size: 14px; line-height: 1.6; color: #c9d1d9; border-left: 3px solid #00d4ff;">
                    ロングポジションの偏りが見られ、急落時には清算による下落加速のリスクがあります。ただしFunding Rateは極端ではなく、現時点では管理可能なレベルに留まっています。
                </div>
            </div>

            <div style="background: #1a2332; border-radius: 15px; padding: 20px; transition: all 0.3s;" 
                 onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(0, 0, 0, 0.3)'"
                 onmouseout="this.style.transform='none'; this.style.boxShadow='none'">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <span style="color: #00d4ff;">クジラ動向</span>
                    <span style="font-size: 24px; font-weight: bold; color: #00ff00;">+55</span>
                </div>
                <div style="background: #0f1722; height: 30px; border-radius: 15px; overflow: hidden; margin-bottom: 10px;">
                    <div style="height: 100%; width: 55%; background: linear-gradient(to right, #00d4ff, #00ff00); transition: width 0.5s;"></div>
                </div>
                <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 15px;">大口蓄積フェーズ</div>
                <div style="border-top: 1px solid #2a3a4a; padding-top: 15px;">
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">1000BTC+ウォレット</span>
                        <span>+2.3%</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #0f1722; font-size: 14px;">
                        <span style="color: #7a8a9a;">大口移動</span>
                        <span>通常レベル</span>
                    </div>
                </div>
                <div style="margin-top: 15px; padding: 15px; background: #0f1722; border-radius: 10px; font-size: 14px; line-height: 1.6; color: #c9d1d9; border-left: 3px solid #00d4ff;">
                    クジラ（大口保有者）は着実にBTCを蓄積しており、売却の兆候は見られません。これは長期的な価格上昇への確信を示しており、相場の底堅さを支えています。
                </div>
            </div>
        </div>

    </div>

    <!-- ポジション追加モーダル -->
    <div class="modal" id="positionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ポジション情報を入力</h3>
                <button class="close-btn" onclick="closeModal()">×</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">ポジションタイプ</label>
                <div class="position-type-buttons">
                    <button class="type-btn long" onclick="selectType('long')" id="longBtn">買い (ロング)</button>
                    <button class="type-btn short" onclick="selectType('short')" id="shortBtn">売り (ショート)</button>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">エントリー価格</label>
                <input type="number" class="form-input" id="entryPriceInput" placeholder="42000">
            </div>


            <button class="submit-btn" onclick="addPosition()">ポジションを追加</button>
        </div>
    </div>

    <script>
        let selectedType = null;
        let hasPosition = false;

        function openModal() {
            document.getElementById('positionModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('positionModal').classList.remove('active');
            selectedType = null;
            document.getElementById('longBtn').classList.remove('active');
            document.getElementById('shortBtn').classList.remove('active');
        }

        function selectType(type) {
            selectedType = type;
            document.getElementById('longBtn').classList.remove('active');
            document.getElementById('shortBtn').classList.remove('active');
            
            if (type === 'long') {
                document.getElementById('longBtn').classList.add('active');
            } else {
                document.getElementById('shortBtn').classList.add('active');
            }
        }

        function addPosition() {
            const entryPrice = document.getElementById('entryPriceInput').value;

            if (!selectedType || !entryPrice) {
                alert('ポジションタイプとエントリー価格を入力してください');
                return;
            }

            // ポジション情報を設定
            hasPosition = true;
            document.getElementById('positionType').textContent = selectedType === 'long' ? '買い' : '売り';
            document.getElementById('entryPrice').textContent = `$${parseFloat(entryPrice).toLocaleString()}`;
            
            // バッジを更新
            const badge = document.getElementById('positionBadge');
            badge.textContent = selectedType === 'long' ? 'ロングポジション' : 'ショートポジション';
            badge.className = 'position-badge ' + selectedType;

            // ビューを切り替え
            document.getElementById('noPositionView').style.display = 'none';
            document.getElementById('positionView').style.display = 'block';

            closeModal();
        }

        function partialExit() {
            if (confirm('ポジションの25%を利確しますか？')) {
                alert('部分利確を実行しました。残りポジションを監視中...');
            }
        }

        function fullExit(type) {
            let message = '';
            if (type === 'profit') {
                message = 'ポジションを全て利確しますか？';
            } else {
                message = '損切りを実行しますか？';
            }

            if (confirm(message)) {
                // ポジションをクリア
                hasPosition = false;
                
                // バッジをリセット
                const badge = document.getElementById('positionBadge');
                badge.textContent = 'ポジションなし';
                badge.className = 'position-badge';

                // ビューを切り替え
                document.getElementById('positionView').style.display = 'none';
                document.getElementById('noPositionView').style.display = 'block';

                // 結果表示
                if (type === 'profit') {
                    alert('利確完了！ポジションを解消しました。次のエントリーチャンスを探しましょう。');
                } else {
                    alert('損切り完了。ポジションを解消しました。相場分析を再開します。');
                }
            }
        }

        // 価格更新シミュレーション（デモ用）
        setInterval(() => {
            if (hasPosition) {
                const currentPrice = 42850 + (Math.random() - 0.5) * 100;
                document.getElementById('currentPrice').textContent = `$${currentPrice.toFixed(0).toLocaleString()}`;
                
                const entryPrice = 42000;
                const diff = currentPrice - entryPrice;
                const percent = (diff / entryPrice * 100).toFixed(1);
                const profitLossEl = document.getElementById('profitLoss');
                
                if (diff > 0) {
                    profitLossEl.textContent = `+$${diff.toFixed(0)} (+${percent}%)`;
                    profitLossEl.className = 'info-value profit';
                } else {
                    profitLossEl.textContent = `$${diff.toFixed(0)} (${percent}%)`;
                    profitLossEl.className = 'info-value loss';
                }
            }
        }, 3000);
    </script>
</body>
</html>