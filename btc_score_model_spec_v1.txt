BTC方向性スコアモデル 技術仕様書 v1.0

1. システム概要

1.1 目的
ビットコインの価格方向性をリアルタイムで判定し、売買判断の根拠となるスコアを生成するシステムを構築する。従来のテクニカル分析のみのアプローチではなく、ファンダメンタル要素を統合した多層的な分析を行う。

1.2 基本構造
システムは「2階建て構造」を採用する：
- 方向性スコア: -100〜+100の範囲で、価格がどちらに動きやすいかを示す
- 信頼度: 0〜1の範囲で、現在取引すべきかどうかを示す
- 最終判断 = 方向性スコア × 信頼度

1.3 フェーズ1の成果物
- スコア生成エンジン（バックエンドAPI）
- 各種データソースとの統合
- リアルタイムスコア計算機能
- 基本的なログ・モニタリング機能

2. システムアーキテクチャ

2.1 全体構成
[外部データソース] → [データ収集層] → [スコア計算層] → [API層] → [将来:ダッシュボード/自動売買]

2.2 レイヤー構造

Layer 1: 方向を決める層（上流）
責務: 市場の大きな流れを把握し、基礎的な方向性を決定

1. 市場資金循環モジュール
   - 入力: 株式指数、債券利回り、金価格、暗号資産時価総額
   - 出力: リスクオン/オフスコア (-1〜+1)

2. マクロ環境モジュール
   - 入力: 政策金利、インフレ指標、雇用統計、中銀発言
   - 出力: 金融環境スコア (-1〜+1)

3. BTC固有ファンダメンタルモジュール
   - 入力: ETF資金流出入、取引所BTC残高、長期保有者動向、ハッシュレート
   - 出力: BTC需給スコア (-1〜+1)

Layer 2: 動きやすさを決める層（中流）
責務: 短期的な市場の勢いと転換点を検出

4. 経済指標・イベント影響モジュール
   - 入力: 経済指標カレンダー、予想vs実績の乖離
   - 出力: イベントインパクトスコア (-1〜+1)

5. 市場心理モジュール
   - 入力: ニューストーン、SNSセンチメント、検索トレンド
   - 出力: 心理バイアススコア (-1〜+1)

6. ポジション構造モジュール
   - 入力: 建玉、Funding Rate、清算マップ
   - 出力: ポジション偏りスコア (-1〜+1)

Layer 3: 位置を特定する層（補助）
責務: 価格の反応しやすい水準を特定

7. レジサポ・出来高帯モジュール
   - 入力: 価格履歴、出来高プロファイル
   - 出力: 重要価格帯リスト、現在価格との距離

Layer 4: 実行可否を決める層（信頼度）
責務: 現在の市場環境で取引すべきかを判定

8. ボラティリティモジュール
   - 入力: ATR、ボリンジャーバンド幅、過去のボラティリティ
   - 出力: ボラティリティ適正度 (0〜1)

9. 流動性モジュール
   - 入力: オーダーブック深度、Bid-Askスプレッド、取引量
   - 出力: 流動性スコア (0〜1)

10. 時間帯モジュール
    - 入力: 現在時刻（UTC）、曜日、月末フラグ
    - 出力: 時間帯信頼度 (0〜1)

11. クジラ動向モジュール
    - 入力: 大口アドレスの動き、取引所への大量入金
    - 出力: クジラアラート度 (通常:1, 警戒:0.5, 危険:0)

12. 異常検知モジュール
    - 入力: 全モジュールのスコア、過去パターンとの比較
    - 出力: 異常度 (0〜1, 0が最も異常)

2.3 時間足別処理
5つの時間足それぞれで独立してスコアを計算：
- 5分足: ポジション構造と市場心理を重視（短期）
- 15分足: 上記に加えイベント影響を考慮
- 1時間足: バランス型
- 4時間足: ファンダメンタル要素の比重を増加
- 日足: マクロ環境とBTC固有ファンダを重視（長期）

3. データフロー

3.1 スコア計算フロー
1. 各モジュールが個別スコア(-1〜+1)を算出
2. 時間足別に重み付けを適用して統合
3. -100〜+100に正規化して方向性スコアを生成
4. 信頼度モジュールが並行して信頼度(0〜1)を算出
5. 最終出力 = {方向性スコア, 信頼度, 状態(上昇/中立/下落)}

3.2 重み付けマトリクス例（初期値）
時間足    資金循環  マクロ  BTCファンダ  イベント  心理  ポジション
5分      0.05     0.05    0.10        0.20    0.30   0.30
15分     0.10     0.10    0.15        0.20    0.25   0.20
1時間    0.15     0.15    0.20        0.20    0.15   0.15
4時間    0.20     0.20    0.25        0.15    0.10   0.10
日足     0.25     0.25    0.30        0.10    0.05   0.05

3.3 時間減衰の適用
各要素は時間とともに影響力が減衰：
- ニュース・イベント: 半減期 4〜8時間
- ポジション構造: 半減期 2〜4時間
- マクロ指標: 半減期 24〜72時間
- オンチェーン: 半減期 48〜168時間


4. データソース要件

4.1 必須データソース（フェーズ1）

カテゴリ | データ | ソース候補 | 更新頻度 | 優先度
---------|--------|-----------|---------|--------
価格データ | BTC価格・出来高 | Binance/Bybit API | 1秒 | 必須
市場データ | S&P500, NASDAQ, DXY | Yahoo Finance/Polygon | 1分 | 必須
債券 | 米10年債利回り | FRED API | 1時間 | 必須
暗号資産 | 時価総額、ドミナンス | CoinGecko/CMC | 5分 | 必須
オンチェーン | 取引所残高 | Glassnode/CryptoQuant | 1時間 | 必須
ポジション | OI, Funding Rate | Binance/Bybit | 1分 | 必須
ニュース | 暗号資産ニュース | CryptoPanic API | 5分 | 高
経済指標 | CPI, NFP等 | TradingEconomics | イベント時 | 高

4.2 オプション（フェーズ2以降）
- オプションデータ（Deribit）
- ソーシャルセンチメント（Twitter API代替）
- クジラアラート（Whale Alert API）


9. 備考
- 初期の重み付けは手動設定とし、データが蓄積後に機械学習で最適化
- 各モジュールは疎結合に設計し、個別にテスト・更新可能にする
- 将来的な自動売買統合を考慮したAPI設計とする