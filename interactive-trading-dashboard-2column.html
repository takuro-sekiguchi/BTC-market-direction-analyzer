<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Reach Analyzer - 2ã‚«ãƒ©ãƒ ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #0a0e1a;
            color: #ffffff;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 80px 20px 20px 20px;
        }

        /* 2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .left-column {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .right-column {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            background: #0a0e1a;
            border-bottom: 1px solid #1a2332;
            z-index: 1000;
            height: 60px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            font-size: 18px;
            font-weight: bold;
            background: linear-gradient(45deg, #00d4ff, #0099ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: #7a8a9a;
            font-size: 12px;
            font-weight: normal;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        /* ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ± */
        .account-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-name {
            color: #ffffff;
            font-size: 14px;
            font-weight: 500;
        }

        .user-plan {
            color: #00d4ff;
            font-size: 11px;
            padding: 3px 8px;
            background: rgba(0, 212, 255, 0.2);
            border-radius: 10px;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        /* è¨€èªåˆ‡ã‚Šæ›¿ãˆ */
        .language-switch {
            display: flex;
            background: #1a2332;
            border-radius: 16px;
            padding: 3px;
            gap: 1px;
        }

        .lang-btn {
            padding: 6px 12px;
            background: transparent;
            border: none;
            color: #7a8a9a;
            font-size: 12px;
            font-weight: 500;
            border-radius: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .lang-btn.active {
            background: #00d4ff;
            color: #0a0e1a;
            font-weight: 600;
        }

        .lang-btn:hover:not(.active) {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
        }

        /* ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæƒ…å ± */
        .credit-info {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 16px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 20px;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .credit-label {
            color: #7a8a9a;
            font-size: 12px;
        }

        .credit-value {
            color: #00d4ff;
            font-size: 14px;
            font-weight: 600;
        }
        
        /* å…è²¬äº‹é … */
        .disclaimer {
            background: #1a2332;
            border-radius: 10px;
            padding: 20px;
            margin-top: 40px;
            text-align: left;
        }
        
        .disclaimer h3 {
            color: #7a8a9a;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .disclaimer ul {
            color: #c9d1d9;
            margin-left: 20px;
            line-height: 1.6;
        }
        
        .disclaimer li {
            margin-bottom: 8px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(45deg, #00d4ff, #0099ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* æ–¹å‘æ€§ã‚¹ã‚³ã‚¢è¡¨ç¤º */
        .score-section {
            background: linear-gradient(135deg, #1a2332 0%, #0f1722 100%);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
        }

        .score-title {
            font-size: 20px;
            color: #7a8a9a;
            margin-bottom: 20px;
        }

        .score-meter {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .meter-background {
            height: 60px;
            background: linear-gradient(to right, #ff3b3b, #ff6b6b 30%, #ffdd00 50%, #90ee90 70%, #00ff00);
            border-radius: 30px;
            position: relative;
            overflow: hidden;
            opacity: 0.3;
        }

        .meter-value {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: 50%;
            width: 4px;
            height: 80px;
            background: #ffffff;
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            transition: left 0.5s ease-out;
        }

        .score-display {
            font-size: 72px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .score-positive {
            color: #00ff00;
        }

        .score-negative {
            color: #ff3b3b;
        }

        .score-direction {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .score-labels {
            display: flex;
            justify-content: space-between;
            color: #7a8a9a;
            font-size: 14px;
            margin-top: 10px;
        }

        /* æ™‚é–“è¶³åˆ¥ã‚¹ã‚³ã‚¢ã‚«ãƒ¼ãƒ‰ */
        .timeframe-score-card {
            background: linear-gradient(135deg, #1a2332 0%, #0f1722 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(42, 58, 74, 0.3);
            position: relative;
            overflow: hidden;
        }

        .timeframe-score-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 212, 255, 0.5);
        }

        .timeframe-label {
            color: #7a8a9a;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timeframe-meter {
            position: relative;
            height: 12px;
            background: #0f1722;
            border-radius: 6px;
            margin: 15px 0;
            overflow: hidden;
            border: 1px solid rgba(42, 58, 74, 0.5);
        }

        .timeframe-meter-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, #ff3b3b 0%, #ff6b6b 25%, #ffdd00 50%, #90ee90 75%, #00ff00 100%);
            opacity: 0.2;
        }

        .timeframe-meter-fill {
            position: absolute;
            top: 0;
            left: 50%;
            height: 100%;
            border-radius: 5px;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        /* è² ã®ã‚¹ã‚³ã‚¢ç”¨ï¼ˆå·¦å´ã«è¡¨ç¤ºï¼‰ */
        .timeframe-meter-fill.negative {
            right: 50%;
            left: auto;
            transform-origin: right;
        }

        .timeframe-score-value {
            font-size: 32px;
            font-weight: bold;
            margin: 15px 0 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .timeframe-direction {
            color: #c9d1d9;
            font-size: 14px;
            font-weight: 500;
            padding: 8px 16px;
            background: rgba(42, 58, 74, 0.3);
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
        }

        /* æ™‚é–“è¶³é‡è¦åº¦ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ */
        .timeframe-score-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--importance-color, #2a3a4a);
        }

        /* æ™‚é–“è¶³é‡è¦åº¦ãƒ¬ãƒ™ãƒ« */
        .timeframe-score-card.high-importance::before,
        .timeframe-score-card.medium-importance::before,
        .timeframe-score-card.low-importance::before {
            background: linear-gradient(45deg, #7a8a9a, #5a6a7a);
        }

        /* ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .user-selection {
            background: #1a2332;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .selection-title {
            font-size: 18px;
            color: #00d4ff;
            margin-bottom: 20px;
            text-align: center;
        }

        /* æ–¹å‘é¸æŠãƒœã‚¿ãƒ³ */
        .direction-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .dir-btn {
            padding: 25px;
            border: 2px solid #2a3a4a;
            background: #0f1722;
            border-radius: 15px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            font-size: 20px;
            font-weight: bold;
        }

        .dir-btn:hover {
            transform: translateY(-2px);
        }

        .dir-btn.buy {
            color: #00ff00;
        }

        .dir-btn.buy.active {
            background: #00ff0020;
            border-color: #00ff00;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }

        .dir-btn.sell {
            color: #ff3b3b;
        }

        .dir-btn.sell.active {
            background: #ff3b3b20;
            border-color: #ff3b3b;
            box-shadow: 0 0 20px rgba(255, 59, 59, 0.3);
        }

        /* Pipsé¸æŠ */
        .pips-selection {
            margin-bottom: 30px;
        }

        .pips-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .pips-value {
            font-size: 28px;
            font-weight: bold;
            color: #00d4ff;
        }

        .slider-container {
            position: relative;
            margin-bottom: 30px;
            padding: 10px 5px;
            background: rgba(26, 35, 50, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(42, 58, 74, 0.5);
        }

        .pips-slider {
            width: 100%;
            height: 40px;
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            outline: none;
            cursor: pointer;
            position: relative;
        }

        .pips-slider::-webkit-slider-track {
            width: 100%;
            height: 16px;
            background: linear-gradient(to right, #1a2332 0%, #2a3a4a 50%, #3a4a5a 100%);
            border-radius: 8px;
            border: 2px solid #0a1220;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .pips-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 36px;
            height: 36px;
            background: linear-gradient(145deg, #00d4ff, #0099ff);
            border: 3px solid #ffffff;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.6), 0 2px 6px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
            margin-top: -10px;
        }

        .pips-slider::-webkit-slider-thumb:hover {
            background: linear-gradient(145deg, #00ffff, #00d4ff);
            box-shadow: 0 6px 16px rgba(0, 212, 255, 0.8), 0 3px 8px rgba(0, 0, 0, 0.4);
            transform: scale(1.1);
        }

        .pips-slider::-webkit-slider-thumb:active {
            background: linear-gradient(145deg, #0099ff, #007acc);
            transform: scale(0.95);
        }

        .pips-slider::-moz-range-track {
            width: 100%;
            height: 16px;
            background: linear-gradient(to right, #1a2332 0%, #2a3a4a 50%, #3a4a5a 100%);
            border-radius: 8px;
            border: 2px solid #0a1220;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .pips-slider::-moz-range-thumb {
            width: 36px;
            height: 36px;
            background: linear-gradient(145deg, #00d4ff, #0099ff);
            border: 3px solid #ffffff;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.6), 0 2px 6px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
        }

        .pips-slider::-moz-range-thumb:hover {
            background: linear-gradient(145deg, #00ffff, #00d4ff);
            box-shadow: 0 6px 16px rgba(0, 212, 255, 0.8), 0 3px 8px rgba(0, 0, 0, 0.4);
            transform: scale(1.1);
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            color: #7a8a9a;
            font-size: 12px;
            margin-top: 8px;
            padding: 0 5px;
        }

        /* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼åŠ¹æœ */
        .pips-slider {
            background: linear-gradient(to right, 
                #00d4ff 0%, 
                #00d4ff var(--progress, 50%), 
                #2a3a4a var(--progress, 50%), 
                #2a3a4a 100%
            );
            background-size: 100% 16px;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: 8px;
        }

        /* å‹ç‡è¨ˆç®—çµæœ */
        .result-section {
            background: linear-gradient(135deg, #1a2332 0%, #0f1722 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid #00d4ff;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            text-align: center;
        }

        .result-item h3 {
            color: #7a8a9a;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .result-value {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .win-rate {
            color: #00ff00;
        }

        .loss-rate {
            color: #ff3b3b;
        }

        .result-detail {
            color: #7a8a9a;
            font-size: 14px;
        }

        /* è¨ˆç®—ãƒœã‚¿ãƒ³ */
        .calc-button {
            display: block;
            width: 100%;
            max-width: 400px;
            margin: 0 auto 30px;
            padding: 20px;
            background: #00d4ff;
            color: #0a0e1a;
            border: none;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .calc-button:hover {
            background: #0099ff;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.5);
        }

        .calc-button:disabled {
            background: #2a3a4a;
            color: #7a8a9a;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* è¿½åŠ æƒ…å ± */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .info-card {
            background: #1a2332;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .info-title {
            color: #7a8a9a;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .info-value {
            font-size: 24px;
            font-weight: bold;
            color: #ffffff;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        
        /* å¤§ç”»é¢ (1200pxä»¥ä¸Š) */
        @media (min-width: 1200px) {
            .container {
                max-width: 1600px;
                padding: 80px 40px 20px 40px;
            }
            
            .main-content {
                grid-template-columns: 2.5fr 1fr;
                gap: 40px;
            }
            
            .score-section {
                padding: 50px;
            }
            
            .score-display {
                font-size: 84px;
            }
            
            .info-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* ä¸­ç”»é¢ (768px - 1199px) - ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»å°ã•ãªãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— */
        @media (min-width: 768px) and (max-width: 1199px) {
            .container {
                max-width: 1200px;
                padding: 80px 30px 20px 30px;
            }
            
            .main-content {
                grid-template-columns: 2fr 1fr;
                gap: 25px;
            }
            
            .left-column {
                gap: 25px;
            }
            
            .right-column {
                gap: 15px;
            }
            
            .score-section {
                padding: 35px;
            }
            
            .score-display {
                font-size: 64px;
            }
            
            .header-right {
                gap: 15px;
            }
            
            .credit-info {
                padding: 5px 14px;
            }
            
            .credit-value {
                font-size: 13px;
            }
            
            .user-name {
                font-size: 13px;
            }
            
            .user-plan {
                font-size: 10px;
                padding: 2px 6px;
            }
            
            .lang-btn {
                font-size: 11px;
                padding: 5px 10px;
            }
            
            .info-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .result-grid {
                gap: 20px;
            }
            
            .result-value {
                font-size: 40px;
            }
        }

        /* å°ç”»é¢ (767pxä»¥ä¸‹) - ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ */
        @media (max-width: 767px) {
            .header {
                padding: 10px 15px;
                height: 50px;
                flex-wrap: wrap;
            }

            .container {
                padding: 70px 15px 15px 15px;
            }
            
            /* 2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’1ã‚«ãƒ©ãƒ ã«å¤‰æ›´ */
            .main-content {
                display: block;
                gap: 20px;
            }
            
            .left-column,
            .right-column {
                width: 100%;
                gap: 20px;
            }

            .logo {
                font-size: 16px;
            }

            .subtitle {
                font-size: 11px;
            }

            .header-right {
                gap: 10px;
                flex-wrap: wrap;
            }
            
            .credit-info {
                order: 3;
                flex-basis: 100%;
                margin-top: 5px;
                padding: 4px 12px;
            }
            
            .credit-label {
                font-size: 11px;
            }
            
            .credit-value {
                font-size: 12px;
            }

            .user-name {
                font-size: 12px;
            }

            .user-plan {
                font-size: 9px;
                padding: 2px 5px;
            }

            .lang-btn {
                font-size: 10px;
                padding: 4px 8px;
            }
            
            .score-section {
                padding: 25px;
                margin-bottom: 20px;
            }

            .score-display {
                font-size: 48px;
            }
            
            .score-direction {
                font-size: 20px;
            }
            
            .user-selection {
                padding: 20px;
                margin-bottom: 20px;
            }

            .result-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .result-value {
                font-size: 36px;
            }

            .info-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .direction-buttons {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .dir-btn {
                padding: 20px;
                font-size: 18px;
            }
            
            .pips-selection {
                margin-bottom: 20px;
            }
            
            .pips-value {
                font-size: 24px;
            }
            
            .slider-container {
                margin-bottom: 20px;
                padding: 8px 4px;
            }
            
            .pips-slider {
                height: 35px;
            }
            
            .pips-slider::-webkit-slider-thumb {
                width: 32px;
                height: 32px;
                margin-top: -8px;
            }
            
            .calc-button {
                padding: 18px;
                font-size: 18px;
                margin-bottom: 20px;
            }
            
            /* ã‚¹ã‚³ã‚¢æ§‹æˆè¦ç´ ã‚°ãƒªãƒƒãƒ‰ã‚’1ã‚«ãƒ©ãƒ ã« */
            .main-content + h3 + div {
                grid-template-columns: 1fr !important;
                gap: 15px;
            }
            
            /* æ™‚é–“è¶³ã‚¹ã‚³ã‚¢ã‚°ãƒªãƒƒãƒ‰ã‚’2ã‚«ãƒ©ãƒ ã«èª¿æ•´ */
            .timeframe-score-card .grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 6px;
            }
        }
        
        /* è¶…å°ç”»é¢ (480pxä»¥ä¸‹) - å°ã•ãªã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ */
        @media (max-width: 480px) {
            .container {
                padding: 60px 10px 10px 10px;
            }
            
            .header {
                padding: 8px 10px;
                height: 45px;
            }
            
            .logo {
                font-size: 14px;
            }
            
            .header-right {
                gap: 8px;
            }
            
            .user-name {
                font-size: 11px;
            }
            
            .lang-btn {
                font-size: 9px;
                padding: 3px 6px;
            }
            
            .score-section {
                padding: 20px;
            }
            
            .score-display {
                font-size: 40px;
            }
            
            .user-selection {
                padding: 15px;
            }
            
            .selection-title {
                font-size: 16px;
            }
            
            .dir-btn {
                padding: 15px;
                font-size: 16px;
            }
            
            .pips-value {
                font-size: 20px;
            }
            
            .result-value {
                font-size: 32px;
            }
            
            .calc-button {
                padding: 15px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-left">
                <h1 class="logo">Market Reach Analyzer</h1>
            </div>
            
            <div class="header-right">
                <!-- ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæƒ…å ± -->
                <div class="credit-info">
                    <span class="credit-label">ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ</span>
                    <span class="credit-value">100/300</span>
                </div>
                
                <!-- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ± -->
                <div class="account-info">
                    <div class="user-name">ç”°ä¸­å¤ªéƒ</div>
                    <div class="user-plan">Proãƒ—ãƒ©ãƒ³</div>
                </div>
                
                <!-- è¨€èªåˆ‡ã‚Šæ›¿ãˆ -->
                <div class="language-switch">
                    <button class="lang-btn active" onclick="switchLanguage('ja')">æ—¥æœ¬èª</button>
                    <button class="lang-btn" onclick="switchLanguage('en')">English</button>
                </div>
            </div>
        </header>

        <!-- 2ã‚«ãƒ©ãƒ ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <div class="main-content">
            <!-- å·¦ã‚«ãƒ©ãƒ  -->
            <div class="left-column">
                <!-- TradingViewãƒãƒ£ãƒ¼ãƒˆ -->
                <div style="background: #1a2332; border-radius: 20px; padding: 20px; margin-bottom: 30px;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px;">BTC/USD ãƒãƒ£ãƒ¼ãƒˆ</h3>
                    <!-- TradingView Widget BEGIN -->
                    <div class="tradingview-widget-container">
                        <div id="tradingview_btc"></div>
                        <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                        <script type="text/javascript">
                        new TradingView.widget(
                        {
                            "width": "100%",
                            "height": 400,
                            "symbol": "BITSTAMP:BTCUSD",
                            "interval": "60",
                            "timezone": "Asia/Tokyo",
                            "theme": "dark",
                            "style": "1",
                            "locale": "ja",
                            "enable_publishing": false,
                            "allow_symbol_change": true,
                            "container_id": "tradingview_btc"
                        }
                        );
                        </script>
                    </div>
                    <!-- TradingView Widget END -->
                </div>

                <!-- æŠ•è³‡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ« -->
                <div class="user-selection">
                    <h3 class="selection-title">æŠ•è³‡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«</h3>
                    
                    <!-- æ–¹å‘é¸æŠ -->
                    <div class="direction-buttons">
                        <button class="dir-btn buy" onclick="selectDirection('buy')">
                            <div style="font-size: 36px;">â†‘</div>
                            <div>è²·ã„ï¼ˆãƒ­ãƒ³ã‚°ï¼‰</div>
                        </button>
                        <button class="dir-btn sell" onclick="selectDirection('sell')">
                            <div style="font-size: 36px;">â†“</div>
                            <div>å£²ã‚Šï¼ˆã‚·ãƒ§ãƒ¼ãƒˆï¼‰</div>
                        </button>
                    </div>

                    <!-- TP/SL Pipsé¸æŠ -->
                    <div class="pips-selection">
                        <!-- TPè¨­å®š -->
                        <div style="margin-bottom: 25px;">
                            <div class="pips-label">
                                <span style="color: #7a8a9a;">åˆ©ç¢ºå¹…ï¼ˆTPï¼‰</span>
                                <span class="pips-value" id="tpPipsValue">50 pips</span>
                            </div>
                            <div class="slider-container">
                                <input type="range" class="pips-slider" id="tpPipsSlider" 
                                       min="10" max="100" value="50" step="5"
                                       oninput="updateTpPips(this.value)">
                            </div>
                            <div class="slider-labels">
                                <span>10 pips</span>
                                <span>30 pips</span>
                                <span>50 pips</span>
                                <span>70 pips</span>
                                <span>100 pips</span>
                            </div>
                        </div>

                        <!-- SLè¨­å®š -->
                        <div style="margin-bottom: 25px;">
                            <div class="pips-label">
                                <span style="color: #7a8a9a;">æåˆ‡ã‚Šå¹…ï¼ˆSLï¼‰</span>
                                <span class="pips-value" id="slPipsValue">20 pips</span>
                            </div>
                            <div class="slider-container">
                                <input type="range" class="pips-slider" id="slPipsSlider" 
                                       min="10" max="100" value="20" step="5"
                                       oninput="updateSlPips(this.value)">
                            </div>
                            <div class="slider-labels">
                                <span>10 pips</span>
                                <span>30 pips</span>
                                <span>50 pips</span>
                                <span>70 pips</span>
                                <span>100 pips</span>
                            </div>
                        </div>

                        <!-- ãƒªã‚¹ã‚¯ãƒªãƒ¯ãƒ¼ãƒ‰æ¯”è¡¨ç¤º -->
                        <div style="background: #0f1722; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="color: #7a8a9a; font-size: 14px; margin-bottom: 5px;">ãƒªã‚¹ã‚¯ãƒªãƒ¯ãƒ¼ãƒ‰æ¯”</div>
                            <div style="font-size: 24px; font-weight: bold; color: #00d4ff;" id="riskRewardRatio">2.5 : 1</div>
                        </div>
                    </div>

                    <button class="calc-button" id="calcButton" onclick="calculatePatternAnalysis()" disabled>
            åˆ†æ
                    </button>
                    
                    <!-- ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ¶ˆè²»èª¬æ˜ -->
                    <div style="text-align: center; margin-top: 15px; padding: 12px; background: rgba(0, 212, 255, 0.1); border-radius: 8px; border: 1px solid rgba(0, 212, 255, 0.2);">
                        <div style="color: #00d4ff; font-size: 14px; font-weight: 500;">
                            <span style="margin-right: 8px;">ğŸ’³</span>ã“ã®åˆ†æã«ã¯1ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãŒæ¶ˆè²»ã•ã‚Œã¾ã™
                        </div>
                        <div style="color: #7a8a9a; font-size: 12px; margin-top: 4px;">
                            åˆ†æå®Ÿè¡Œå¾Œã€æ®‹ã‚Šã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ•°ãŒæ›´æ–°ã•ã‚Œã¾ã™
                        </div>
                    </div>
                </div>

                <!-- åˆ†æçµæœ -->
                <div class="result-section" id="resultSection" style="display: none;">
                    <h3 style="text-align: center; color: #00d4ff; margin-bottom: 30px; font-size: 24px;">
        åˆ†æçµæœ
                    </h3>
                    <div class="result-grid">
                        <div class="result-item">
                            <h3>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåˆ°é”ãƒ‘ã‚¿ãƒ¼ãƒ³</h3>
                            <div class="result-value win-rate" id="tpRate">68%</div>
                        </div>
                        <div class="result-item">
                            <h3>ã‚¹ãƒˆãƒƒãƒ—åˆ°é”ãƒ‘ã‚¿ãƒ¼ãƒ³</h3>
                            <div class="result-value loss-rate" id="slRate">32%</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; padding: 20px; background: #0f1722; border-radius: 10px;">
                        <h4 style="color: #00d4ff; margin-bottom: 15px;">è©³ç´°åˆ†æ</h4>
                        <div style="display: grid; gap: 10px; color: #c9d1d9;">
                            <div>â€¢ éå»ãƒ‡ãƒ¼ã‚¿ä»¶æ•°: <span style="color: #00d4ff;">152ä»¶</span></div>
                            <div>â€¢ ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ä¸€è‡´: <span style="color: #00ff00;">â—‹</span></div>
                            <div>â€¢ ãƒªã‚¹ã‚¯ãƒªãƒ¯ãƒ¼ãƒ‰æ¯”: <span style="color: #00d4ff;" id="rrAnalysis">2.5:1 è‰¯å¥½</span></div>
                            <div>â€¢ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœ: <span style="color: #00d4ff;" id="expectedValue">+12.6 pips</span></div>
                            <div>â€¢ äºˆæƒ³æ‰€è¦æ™‚é–“: <span style="color: #00d4ff;">ç´„2.5æ™‚é–“</span></div>
                        </div>
                    </div>
                </div>

                <!-- AIç·åˆè§£èª¬ -->
                <div style="background: #1a2332; border-left: 4px solid #00d4ff; border-radius: 15px; padding: 25px;">
                    <h3 style="color: #00d4ff; margin-bottom: 15px;">AIç·åˆè§£èª¬</h3>
                    <p style="color: #c9d1d9; font-size: 16px; line-height: 1.8; margin-bottom: 20px;">
                        ç¾åœ¨ã®BTCå¸‚å ´ã¯æ˜ç¢ºãªä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰ç’°å¢ƒã«ã‚ã‚Šã¾ã™ã€‚æ–¹å‘æ€§ã‚¹ã‚³ã‚¢+44ã¯è²·ã„å„ªå‹¢ã‚’ç¤ºã—ã¦ãŠã‚Šã€ETFã¸ã®ç¶™ç¶šçš„ãªè³‡é‡‘æµå…¥ï¼ˆ+$285Mï¼‰ã¨å¤§å£æ³¨æ–‡ã®è²·ã„é›†ä¸­ã«ã‚ˆã‚Šéœ€çµ¦ãƒãƒ©ãƒ³ã‚¹ã¯è‰¯å¥½ã§ã™ã€‚é¡ä¼¼åº¦ã‚¹ã‚³ã‚¢87%ã¯éå»ã®æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã¨é«˜ã„ä¸€è‡´ç‡ã‚’ç¤ºã—ã¦ãŠã‚Šã€ãƒˆãƒ¬ãƒ¼ãƒ‰ç²¾åº¦å‘ä¸ŠãŒæœŸå¾…ã§ãã¾ã™ã€‚
                    </p>
                    <p style="color: #c9d1d9; font-size: 16px; line-height: 1.8; margin-bottom: 20px;">
                        ãŸã ã—ã€4æ™‚é–“23åˆ†å¾Œã®CPIç™ºè¡¨ã‚’æ§ãˆã¦ãŠã‚Šã€æŒ‡æ¨™çµæœæ¬¡ç¬¬ã§ã¯çŸ­æœŸçš„ãªå¤‰å‹•ãŒäºˆæƒ³ã•ã‚Œã¾ã™ã€‚ATRã¯$425ã¨é©åº¦ãªãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ç¤ºã—ã¦ã„ã‚‹ãŸã‚ã€20-30pipså¹…ã§ã®ãƒ‡ã‚¤ãƒˆãƒ¬ãƒ¼ãƒ‰ãŒæœ€é©ã¨åˆ¤æ–­ã•ã‚Œã¾ã™ã€‚ç¾åœ¨ã®ãƒˆãƒ¬ãƒ³ãƒ‰å¼·åº¦ã¯ã€Œå¼·ã„ã€çŠ¶æ³ã§ã‚ã‚Šã€æŠ¼ã—ç›®ã§ã®è²·ã„ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãŒæœ‰åŠ¹ãªæˆ¦ç•¥ã¨ãªã‚Šã¾ã™ã€‚
                    </p>
                    <div style="padding: 15px; background: #0f1722; border-radius: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span style="color: #7a8a9a; font-size: 14px;">ãƒ‡ãƒ¼ã‚¿åˆ†æçµæœ</span>
                            <span style="color: #00ff00; font-weight: bold; font-size: 18px;">ä¸Šæ˜‡å‚¾å‘ã‚’æ¤œå‡º</span>
                        </div>
                        <div style="font-size: 14px; color: #7a8a9a;">
            ãƒˆãƒ¬ãƒ³ãƒ‰ç’°å¢ƒè‰¯å¥½ Ã— é«˜é¡ä¼¼åº¦ Ã— é©æ­£ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ â†’ ä¸Šæ˜‡ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œå‡º
                        </div>
                    </div>
                </div>
            </div>

            <!-- å³ã‚«ãƒ©ãƒ  -->
            <div class="right-column">
                <!-- BTCæ–¹å‘æ€§ã‚¹ã‚³ã‚¢ï¼ˆæ™‚é–“è¶³åˆ¥ï¼‰ -->
                <div class="score-section">
                    <div class="score-title">BTCæ–¹å‘æ€§ã‚¹ã‚³ã‚¢</div>
                    <div class="score-meter">
                        <div class="meter-background"></div>
                        <div class="meter-value" id="meterValue"></div>
                    </div>
                    <div class="score-display score-positive" id="scoreValue">+44</div>
                    <div class="score-direction score-positive">è²·ã„å„ªå‹¢</div>
                    <div class="score-labels">
                        <span>å£²ã‚Šå„ªå‹¢</span>
                        <span>ä¸­ç«‹</span>
                        <span>è²·ã„å„ªå‹¢</span>
                    </div>
                </div>

                <!-- ç›¸å ´çŠ¶æ³ -->
                <div style="background: #1a2332; border-radius: 15px; padding: 20px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <h3 style="color: #00d4ff; margin: 0; font-size: 18px;">ç›¸å ´çŠ¶æ³</h3>
                        <span style="color: #00ff00; font-size: 14px; font-weight: bold;">ãƒˆãƒ¬ãƒ³ãƒ‰ç›¸å ´</span>
                    </div>
                    
                    <!-- ç›¸å ´æŒ‡æ¨™ -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 15px;">
                        <div style="background: #0f1722; border-radius: 8px; padding: 12px; text-align: center;">
                            <div style="color: #7a8a9a; font-size: 11px; margin-bottom: 5px;">ATR</div>
                            <div style="color: #00d4ff; font-size: 16px; font-weight: bold;">$425</div>
                        </div>
                        <div style="background: #0f1722; border-radius: 8px; padding: 12px; text-align: center;">
                            <div style="color: #7a8a9a; font-size: 11px; margin-bottom: 5px;">é¡ä¼¼åº¦</div>
                            <div style="color: #00ff00; font-size: 16px; font-weight: bold;">87%</div>
                        </div>
                    </div>
                    
                    <!-- é‡è¦ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆã‚³ãƒ³ãƒ‘ã‚¯ãƒˆç‰ˆï¼‰ -->
                    <div style="background: #0f1722; border-radius: 8px; padding: 12px;">
                        <div style="color: #00d4ff; font-size: 12px; font-weight: bold; margin-bottom: 8px;">ä»Šæ—¥ã®é‡è¦ã‚¤ãƒ™ãƒ³ãƒˆ</div>
                        <div style="font-size: 12px; color: #c9d1d9; margin-bottom: 5px;">â€¢ ç±³CPIç™ºè¡¨ (4h23må¾Œ)</div>
                        <div style="font-size: 12px; color: #c9d1d9; margin-bottom: 5px;">â€¢ ETFæµå…¥ +$285M</div>
                        <div style="font-size: 12px; color: #c9d1d9;">â€¢ $43,000ã«è²·ã„é›†ä¸­</div>
                    </div>
                </div>

                <!-- ã‚¹ã‚³ã‚¢æ§‹æˆè¦ç´ ï¼ˆã‚³ãƒ³ãƒ‘ã‚¯ãƒˆç‰ˆï¼‰ -->
                <div style="background: #1a2332; border-radius: 15px; padding: 20px; margin-bottom: 20px;">
                    <h3 style="color: #00d4ff; margin-bottom: 15px; font-size: 18px;">ã‚¹ã‚³ã‚¢æ§‹æˆè¦ç´ </h3>
                    
                    <div style="display: grid; gap: 12px;">
                        <!-- æ™‚é–“è¶³åˆ¥ã‚¹ã‚³ã‚¢ -->
                        <div style="background: #0f1722; border-radius: 10px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span style="color: #00d4ff; font-size: 14px;">æ™‚é–“è¶³åˆ¥</span>
                                <span style="font-size: 18px; font-weight: bold; color: #00ff00;">+44</span>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px;">
                                <div style="background: #1a2332; border-radius: 6px; padding: 6px; text-align: center;">
                                    <div style="color: #7a8a9a; font-size: 9px;">5åˆ†</div>
                                    <div style="font-size: 12px; font-weight: bold; color: #ff3b3b;">-8</div>
                                </div>
                                <div style="background: #1a2332; border-radius: 6px; padding: 6px; text-align: center;">
                                    <div style="color: #7a8a9a; font-size: 9px;">1æ™‚é–“</div>
                                    <div style="font-size: 12px; font-weight: bold; color: #00ff00;">+35</div>
                                </div>
                                <div style="background: #1a2332; border-radius: 6px; padding: 6px; text-align: center;">
                                    <div style="color: #7a8a9a; font-size: 9px;">æ—¥è¶³</div>
                                    <div style="font-size: 12px; font-weight: bold; color: #00ff00;">+62</div>
                                </div>
                            </div>
                        </div>

                        <!-- BTCéœ€çµ¦ -->
                        <div style="background: #0f1722; border-radius: 10px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span style="color: #00d4ff; font-size: 14px;">BTCéœ€çµ¦</span>
                                <span style="font-size: 18px; font-weight: bold; color: #00ff00;">+85</span>
                            </div>
                            <div style="font-size: 11px; color: #7a8a9a;">ETFæµå…¥ç¶™ç¶šã€å–å¼•æ‰€æ®‹é«˜æ¸›å°‘</div>
                        </div>

                        <!-- å¸‚å ´è³‡é‡‘å¾ªç’° -->
                        <div style="background: #0f1722; border-radius: 10px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span style="color: #00d4ff; font-size: 14px;">å¸‚å ´è³‡é‡‘å¾ªç’°</span>
                                <span style="font-size: 18px; font-weight: bold; color: #00ff00;">+75</span>
                            </div>
                            <div style="font-size: 11px; color: #7a8a9a;">æ ªå¼å¸‚å ´å¥½èª¿ã€ãƒªã‚¹ã‚¯ã‚ªãƒ³ç’°å¢ƒ</div>
                        </div>

                        <!-- ãƒã‚¯ãƒ­ç’°å¢ƒ -->
                        <div style="background: #0f1722; border-radius: 10px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span style="color: #00d4ff; font-size: 14px;">ãƒã‚¯ãƒ­ç’°å¢ƒ</span>
                                <span style="font-size: 18px; font-weight: bold; color: #00ff00;">+60</span>
                            </div>
                            <div style="font-size: 11px; color: #7a8a9a;">é‡‘åˆ©ä½ä¸‹è¦‹é€šã—ã€ç·©å’Œçš„</div>
                        </div>
                    </div>
                </div>

                <!-- å…è²¬äº‹é … -->
                <div style="background: #1a2332; border-radius: 10px; padding: 15px;">
                    <h3 style="color: #7a8a9a; margin-bottom: 12px; font-size: 14px;">å…è²¬äº‹é …</h3>
                    <div style="color: #c9d1d9; font-size: 11px; line-height: 1.5;">
                        <p style="margin-bottom: 8px;">æœ¬ãƒ„ãƒ¼ãƒ«ã¯æƒ…å ±æä¾›ã®ã¿ã‚’ç›®çš„ã¨ã—ã€æŠ•è³‡åŠ©è¨€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
                        <p style="margin-bottom: 8px;">æŠ•è³‡åˆ¤æ–­ã¯å¿…ãšã”è‡ªèº«ã§è¡Œã£ã¦ãã ã•ã„ã€‚</p>
                        <p style="margin-bottom: 0;">æš—å·è³‡ç”£æŠ•è³‡ã«ã¯ãƒªã‚¹ã‚¯ãŒä¼´ã„ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        let selectedDirection = null;
        let selectedTpPips = 50;
        let selectedSlPips = 20;

        // æ–¹å‘æ€§ã‚¹ã‚³ã‚¢ã®å‹•çš„æ›´æ–°ï¼ˆãƒ‡ãƒ¢ç”¨ï¼‰
        setInterval(() => {
            const score = Math.floor(Math.random() * 100) - 50;
            updateScore(score);
        }, 5000);

        function updateScore(score) {
            const scoreElement = document.getElementById('scoreValue');
            const meterValue = document.getElementById('meterValue');
            
            // ã‚¹ã‚³ã‚¢è¡¨ç¤ºæ›´æ–°
            scoreElement.textContent = score > 0 ? `+${score}` : score;
            
            // è‰²ã®æ›´æ–°
            if (score > 20) {
                scoreElement.className = 'score-display score-positive';
            } else if (score < -20) {
                scoreElement.className = 'score-display score-negative';
            } else {
                scoreElement.className = 'score-display';
                scoreElement.style.color = '#ffdd00';
            }
            
            // ãƒ¡ãƒ¼ã‚¿ãƒ¼ä½ç½®æ›´æ–°
            const position = ((score + 100) / 200) * 100;
            meterValue.style.left = position + '%';
        }

        function selectDirection(direction) {
            selectedDirection = direction;
            
            // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.dir-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (direction === 'buy') {
                document.querySelector('.dir-btn.buy').classList.add('active');
            } else {
                document.querySelector('.dir-btn.sell').classList.add('active');
            }
            
            // è¨ˆç®—ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            document.getElementById('calcButton').disabled = false;
        }

        function updateTpPips(value) {
            selectedTpPips = parseInt(value);
            document.getElementById('tpPipsValue').textContent = value + ' pips';
            
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®è¦–è¦šæ›´æ–°
            const progress = ((value - 10) / (100 - 10)) * 100;
            document.getElementById('tpPipsSlider').style.setProperty('--progress', progress + '%');
            
            updateRiskReward();
        }

        function updateSlPips(value) {
            selectedSlPips = parseInt(value);
            document.getElementById('slPipsValue').textContent = value + ' pips';
            
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®è¦–è¦šæ›´æ–°
            const progress = ((value - 10) / (100 - 10)) * 100;
            document.getElementById('slPipsSlider').style.setProperty('--progress', progress + '%');
            
            updateRiskReward();
        }

        function updateRiskReward() {
            const ratio = selectedTpPips / selectedSlPips;
            const formattedRatio = ratio % 1 === 0 ? ratio.toString() : ratio.toFixed(1);
            document.getElementById('riskRewardRatio').textContent = formattedRatio + ' : 1';
        }

        function calculatePatternAnalysis() {
            if (!selectedDirection) return;
            
            // çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
            document.getElementById('resultSection').style.display = 'block';
            
            // ã‚¹ã‚³ã‚¢ãƒ™ãƒ¼ã‚¹ã§éå»ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æ
            const currentScore = parseInt(document.getElementById('scoreValue').textContent);
            let baseTpRate = 50;
            
            // æ–¹å‘æ€§ã¨ç¾åœ¨ã®ã‚¹ã‚³ã‚¢ãŒä¸€è‡´ã—ã¦ã„ã‚‹å ´åˆã®ãƒ‘ã‚¿ãƒ¼ãƒ³èª¿æ•´
            if ((selectedDirection === 'buy' && currentScore > 0) || 
                (selectedDirection === 'sell' && currentScore < 0)) {
                baseTpRate += Math.abs(currentScore) * 0.3;
            } else {
                baseTpRate -= Math.abs(currentScore) * 0.2;
            }
            
            // TPå¹…ã«ã‚ˆã‚‹éå»ãƒ‘ã‚¿ãƒ¼ãƒ³èª¿æ•´
            const tpAdjustment = Math.max(-20, Math.min(15, (30 - selectedTpPips) * 0.5));
            baseTpRate += tpAdjustment;
            
            // SLå¹…ã«ã‚ˆã‚‹éå»ãƒ‘ã‚¿ãƒ¼ãƒ³èª¿æ•´
            const slAdjustment = Math.max(-15, Math.min(20, (selectedSlPips - 30) * 0.3));
            baseTpRate += slAdjustment;
            
            // ãƒ‘ã‚¿ãƒ¼ãƒ³ä¸€è‡´ç‡ã‚’10-90ã®ç¯„å›²ã«åã‚ã‚‹
            baseTpRate = Math.max(10, Math.min(90, baseTpRate));
            const baseSlRate = 100 - baseTpRate;
            
            // çµæœã‚’è¡¨ç¤º
            const tpRate = Math.round(baseTpRate);
            const slRate = Math.round(baseSlRate);
            
            document.getElementById('tpRate').textContent = tpRate + '%';
            document.getElementById('slRate').textContent = slRate + '%';
            
            // è¡¨ç¤ºç”¨pipså€¤ã‚’æ›´æ–°
            document.getElementById('tpPipsDisplay').textContent = selectedTpPips + ' pips';
            document.getElementById('slPipsDisplay').textContent = selectedSlPips + ' pips';
            
            // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœã‚’è¨ˆç®—
            const expectedValue = ((selectedTpPips * tpRate / 100) - (selectedSlPips * slRate / 100)).toFixed(1);
            document.getElementById('expectedValue').textContent = (expectedValue > 0 ? '+' : '') + expectedValue + ' pips';
            
            // ãƒªã‚¹ã‚¯ãƒªãƒ¯ãƒ¼ãƒ‰åˆ†æã‚’æ›´æ–°
            const rrRatio = selectedTpPips / selectedSlPips;
            const formattedRrRatio = rrRatio % 1 === 0 ? rrRatio.toString() : rrRatio.toFixed(1);
            document.getElementById('rrAnalysis').textContent = formattedRrRatio + ':1';
            
            // ã‚¹ãƒ ãƒ¼ã‚ºã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        // è¨€èªåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
        function switchLanguage(lang) {
            // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (lang === 'ja') {
                document.querySelector('.lang-btn[onclick*="ja"]').classList.add('active');
                // æ—¥æœ¬èªè¡¨ç¤ºã®å‡¦ç†ï¼ˆç¾åœ¨ã¯æ—¥æœ¬èªãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
            } else {
                document.querySelector('.lang-btn[onclick*="en"]').classList.add('active');
                // è‹±èªè¡¨ç¤ºã®å‡¦ç†ï¼ˆå°†æ¥çš„ã«å®Ÿè£…ï¼‰
                alert('English language support coming soon!');
            }
        }

        // åˆæœŸåŒ–æ™‚ã«ãƒªã‚¹ã‚¯ãƒªãƒ¯ãƒ¼ãƒ‰æ¯”ã¨ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’è¨­å®š
        updateRiskReward();
        
        // åˆæœŸãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®è¨­å®š
        const initialTpProgress = ((selectedTpPips - 10) / (100 - 10)) * 100;
        const initialSlProgress = ((selectedSlPips - 10) / (100 - 10)) * 100;
        document.getElementById('tpPipsSlider').style.setProperty('--progress', initialTpProgress + '%');
        document.getElementById('slPipsSlider').style.setProperty('--progress', initialSlProgress + '%');
    </script>
</body>
</html>